<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Chetan Kumar— Reaction Timer</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 24px; }
    #panel { display: flex; gap: 16px; align-items: center; }
    button { padding: .5rem .8rem; }
  </style>
</head>
<body>
  <h1>Chetan Kumar — Reaction Timer</h1>

  <div id="panel">
    <p id="target">Your time</p>
    <p id="countdown">Count</p>
    <button id="startBtn" onclick="startTime()">Start Timer</button>
    <button id="reactBtn">React Now</button>
  </div>

  <script>
    let myTime = undefined;
    let zeroTime = undefined;
    let startedAt = undefined;

    function recordReact() {
      myTime = Date.now();
      console.log("React captured:", myTime);
    }
    document.getElementById("reactBtn").onclick = recordReact;

    function startTime() {
      myTime = undefined;
      document.getElementById("target").innerHTML = "Your time";
      document.getElementById("countdown").innerHTML = "Count";

      startedAt = Date.now();
      const secs = 3;
      zeroTime = startedAt + secs * 1000;

      for (let i = 0; i <= secs; i++) {
        setTimeout(() => {
          document.getElementById("countdown").innerHTML = (secs - i);
        }, i * 1000);
      }

      setTimeout(() => {
        if (myTime === undefined) {
          document.getElementById("target").innerHTML = "Too Slow";
        } else {
          const diff = zeroTime - myTime;
          const ms = Math.abs(diff);
          document.getElementById("target").innerHTML =
            `Time was ${ms} ms (${diff >= 0 ? "early" : "late"})`;
        }
      }, secs * 1000);
    }
  </script>
</body>
</html>